---
// ScrollAnimationWrapper.astro
// Make sure the component structure follows Astro's best practices
---

<div class="hidden-section opacity-0 translate-y-10 scale-95 transition-all duration-1000 ease-smooth overflow-hidden" client:only>
  <slot></slot>
</div>

<script client:only type="module">
  const sections = document.querySelectorAll('.hidden-section');

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('opacity-100', 'translate-y-0', 'scale-100');
        entry.target.classList.remove('opacity-0', 'translate-y-10', 'scale-95');
      } else {
        entry.target.classList.remove('opacity-100', 'translate-y-0', 'scale-100');
        entry.target.classList.add('opacity-0', 'translate-y-10', 'scale-95');
      }
    });
  }, {
    threshold: [0, 0.5, 1]  // More granular threshold checks
  });

  sections.forEach(section => observer.observe(section));
</script>

<style>
  .hidden-section {
    transition: transform 1s ease-smoother, opacity 1s ease-smoother;
    will-change: transform, opacity;
  }
</style>